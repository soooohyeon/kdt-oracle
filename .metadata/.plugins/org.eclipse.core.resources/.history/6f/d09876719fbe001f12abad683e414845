-- VIEW
-- AS 뒤 작성한 쿼리문으로 VIEW에 담음
CREATE VIEW MEMRENTAL AS
SELECT M.MEM_ID, M.MEM_NAME, R.REN_ID, R.BOOK_ID, R.REN_RENTALDATE, R.REN_RETURNDATE
FROM TBL_MEMBER M
JOIN TBL_RENTAL R	-- 내부조인
ON M.MEM_ID = R.MEM_ID; -- 일치하는 컬럼으로 ON절 작성

SELECT * FROM MEMRENTAL;

SELECT * FROM TBL_RENTAL tR;

-- PLAYER 테이블에서 나이 컬럼을 추가한 뷰 생성
SELECT * FROM PLAYER;


-- (SYSDATE - BIRTH_DATE)/365 : 나이
SELECT PLAYER_NAME 이름, TRUNC(BIRTH_DATE, 'YYYY') 생일, ROUND((SYSDATE - BIRTH_DATE)/365, 0) 나이
FROM PLAYER p;
-- TRUNC 함수 : 시간 정보를 제외한 날짜값만 유지 (형식은 YYYY-MM-DD HH:mm:SS 그대로 유지됨)
-- TRUNC(data [, format]) : 날짜 값에서 시간정보(HH:MI:SS)를 제거하고 날짜만 반환

--SELECT SYSDATE, TO_CHAR(SYSDATE, 'YYYY-MM-DD') FROM DUAL;	-- 문자열 타입 날짜
SELECT SYSDATE, TO_CHAR(SYSDATE, 'YYYY-MM-DD') FROM DUAL;


