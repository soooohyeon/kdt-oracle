CREATE TABLE TBL_STUDENT (
	STUDENT_ID NUMBER,
	STUDENT_NAME VARCHAR2(100) NOT NULL,
	STUDENT_AGE NUMBER NOT NULL,
	STUDENT_PHONE VARCHAR2(100) NOT NULL UNIQUE,
	STUDENT_ADDRESS VARCHAR2(100) NOT NULL,
	CONSTRAINT PK_STUDENT PRIMARY KEY(STUDENT_ID)
);

CREATE TABLE TBL_SUBJECT (
	SUBJECT_ID NUMBER,
	STUDENT_NAME VARCHAR2(100) NOT NULL UNIQUE,
	CONSTRAINT PK_SUBJECT PRIMARY KEY (SUBJECT_ID)
);

CREATE TABLE TBL_TEACHER (
	TEACHER_ID NUMBER,
	TEACHER_NAME VARCHAR2(100),
	CONSTRAINT PK_TEACHER PRIMARY KEY (TEACHER_ID)
);

CREATE TABLE TBL_CLASS (
	CLASS_ID NUMBER,
	CLASS_STARTDAY DATE NOT NULL,
	CLASS_TIME NUMBER NOT NULL,
	SUBJECT_ID NUMBER,
	TEACHER_ID NUMBER,
	CONSTRAINT PK_CLASS PRIMARY KEY (CLASS_ID),
	CONSTRAINT FK_CLASS_SUBJECT FOREIGN KEY (SUBJECT_ID)
		REFERENCES TBL_SUBJECT(SUBJECT_ID),
	CONSTRAINT FK_CLASS_TEACHER FOREIGN KEY (TEACHER_ID)
		REFERENCES TBL_TEACHER(TEACHER_ID)
);

CREATE TABLE TBL_SCORELIST (
	SCORE_NUMBER NUMBER NOT NULL,
	CLASS_ID NUMBER,
	STUDENT_ID NUMBER,
	CONSTRAINT PK_SCORELIST PRIMARY KEY (SCORE_NUMBER, CLASS_ID),
	CONSTRAINT FK_SCORELIST_CLASS FOREIGN KEY (CLASS_ID)
		REFERENCES TBL_CLASS (CLASS_ID),
	CONSTRAINT FK_SCORELIST_STUDENT FOREIGN KEY (STUDENT_ID)
		REFERENCES TBL_STUDENT (STUDENT_ID)
);

-- 각 테이블의 시퀀스 생성 (성적 제외)
CREATE SEQUENCE SEQ_STUDENT;

SELECT * FROM TBL_STUDENT;
SELECT * FROM TBL_SUBJECT;
SELECT * FROM TBL_TEACHER;
SELECT * FROM TBL_CLASS;
SELECT * FROM TBL_SCORELIST;

